(this["webpackJsonppersonalization-example"]=this["webpackJsonppersonalization-example"]||[]).push([[0],{173:function(e,t,n){},175:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(33),i=n.n(r),s=(n(173),n(174),n(175),n(5)),o=n(80),j=n(49),l=n(276),u=n(279),b=n(278),d=n(281),O=n(79),x=n(6),m=n(2),p=n(19),h=[{title:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u044b",description:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u0444\u043e\u0440\u043c, \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0432 GET \u0437\u0430\u043f\u0440\u043e\u0441"},{title:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433",description:"\u0415\u0441\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433 \u043f\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0443, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u043b\u0438 \u043a\u043b\u0438\u0435\u043d\u0442 \u043a \u043d\u0443\u0436\u043d\u043e\u043c\u0443"},{title:"\u041e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u044b",description:"\u0415\u0441\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0434 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u043d\u0430\u0434\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c \u0435\u043c\u0443 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442"}],f=Object(p.f)(0),v=f.map((function(e){return h[e]})),g=Object(p.d)();f.on(g,(function(e,t){return t}));var w=n(37),I=n.n(w),S=n(48),k=n(156),y=n.n(k),N=function(){var e=Object(S.a)(I.a.mark((function e(t){var n,c,a,r,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.domain,a="https://web.popmechanic.ru/web/init/".concat(n,"/?domain=").concat(c),e.next=4,y.a.get(a);case 4:if(r=e.sent,!(i=r.data.forms)){e.next=8;break}return e.abrupt("return",i);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=Object(p.f)([]),R=Object(p.c)(N);E.on(R.doneData,(function(e,t){return g(1),t}));var C=Object(p.d)(),T=Object(p.d)(),M=Object(p.f)({domain:"",id:""});M.on(T,(function(e,t){var n=t.field,c=t.value;return Object(m.a)(Object(m.a)({},e),{},Object(x.a)({},n,c))})),Object(p.i)({clock:C,source:M,target:R});var A=T.prepend((function(e){return{field:e.target.name,value:e.target.value}})),D=n(50),_=n(7),z=function(){var e=Object(D.a)(M),t=u.a.Text,n=u.a.Title;return Object(_.jsxs)("div",{children:[Object(_.jsxs)(b.a,{layout:"vertical",onFinish:C,children:[Object(_.jsx)(b.a.Item,{label:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0432 \u043f\u043e\u043f\u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0430\u0445",children:Object(_.jsx)(d.a,{placeholder:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",value:e.id,name:"id",onChange:A})}),Object(_.jsx)(b.a.Item,{label:"\u0414\u043e\u043c\u0435\u043d \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0444\u043e\u0440\u043c\u044b",children:Object(_.jsx)(d.a,{placeholder:"\u0414\u043e\u043c\u0435\u043d",name:"domain",value:e.domain,onChange:A})}),Object(_.jsx)(b.a.Item,{children:Object(_.jsx)(O.a,{type:"primary",htmlType:"submit",children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0444\u043e\u0440\u043c"})})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)(n,{level:4,children:"URL \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0438\u043d\u0444\u043e\u043c\u0440\u0430\u0446\u0438\u0438 \u043e \u0444\u043e\u0440\u043c\u0430\u0445"}),Object(_.jsx)(t,{code:!0,style:{whiteSpace:"nowrap"},children:"https://web.popmechanic.ru/web/init/".concat(e.id,"/?domain=").concat(e.domain)})]})]})},B=n(282),P=(n(263),function(e){var t=e.url;return Object(_.jsx)("div",{children:Object(_.jsx)("img",{src:t,alt:"",style:{maxWidth:"100%"}})})}),F=function(e){var t=e.bannerImageUrl;return Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"device-wrapper",children:Object(_.jsxs)("div",{className:"device","data-device":"iPhone7","data-orientation":"portrait","data-color":"black",children:[Object(_.jsxs)("div",{className:"screen",style:{backgroundColor:"white",padding:"15px 10px"},children:[Object(_.jsx)(B.a,{}),t&&Object(_.jsx)(P,{url:t})]}),Object(_.jsx)("div",{className:"button"})]})})})},q=n(280),J=function(){var e=q.a.Step,t=Object(D.a)(f);return Object(_.jsx)(q.a,{direction:"vertical",current:t,children:h.map((function(t){return Object(_.jsx)(e,{title:t.title,description:t.description},t.title)}))})},U=n(286),W=function(e,t){var n=e.value,c=n.inSegment,a=n.inSegmentByDefault;return!(void 0!==t||!a)||(!(!c||!t)||!c&&!t)},G=function(e,t){return new Promise((function(n,c){window.mindbox("sync",{operation:t,data:{segmentations:[{ids:{externalId:e}}]},onSuccess:function(e){n(L(e))},onValidationError:function(e){c(e)},onError:function(e){c(e)}})}))},L=function(e){if(e.customerSegmentations)return!!e.customerSegmentations[0].segment},V=n(277),Z=n(285),$=n(284),H=function(e){var t,n=e.formInfo,a=e.showInResult,r={targeting:(t=n).new_targeting.filter.nodes,views:t.settings_splits[0].settings},i=r.targeting,o=r.views,j=Object(c.useState)(0===(null===i||void 0===i?void 0:i.length)),l=Object(s.a)(j,2),u=l[0],b=l[1],d=Object(c.useState)(!1),x=Object(s.a)(d,2),m=x[0],p=x[1],h=Object(c.useState)(null),f=Object(s.a)(h,2),v=f[0],g=f[1],w=function(){var e=Object(S.a)(I.a.mark((function e(){var t,n,c,a,r,o,j;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=11;break}return t=Object(s.a)(i,1),n=t[0],c=n.value,a=c.segmentation,r=c.operation,p(!0),e.next=6,G(a,r);case 6:o=e.sent,g(o),j=W(n,o),b(j),p(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){return i&&i.length>0&&"mindbox_segment"===i[0].field};return Object(_.jsx)(V.a,{title:n.name,actions:[k()&&Object(_.jsx)(O.a,{type:"link",loading:m,size:"small",onClick:w,children:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0435\u0433\u043c\u0435\u043d\u0442"},"checkSegment"),Object(_.jsx)(O.a,{type:"link",size:"small",disabled:!u,onClick:function(){return a(o.image)},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"},"showINResult")],children:Object(_.jsxs)(Z.b,{bordered:!0,size:"small",children:[k()?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Z.b.Item,{label:"\u0422\u0438\u043f \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433\u0430",span:3,children:"\u0421\u0435\u0433\u043c\u0435\u043d\u0442 Mindbox"}),Object(_.jsx)(Z.b.Item,{label:"\u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0432 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0435",span:3,children:i&&i[0].value.inSegment?"\u0414\u0430":"\u041d\u0435\u0442"}),Object(_.jsx)(Z.b.Item,{label:"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c, \u0435\u0441\u043b\u0438 \u043d\u0435 \u043d\u0430\u0448\u043b\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",span:3,children:i&&i[0].value.inSegmentByDefault?"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c":"\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c"})]}):Object(_.jsx)(Z.b.Item,{label:"\u0422\u0438\u043f \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433\u0430",span:3,children:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432\u0441\u0435\u043c"}),null!==v&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Z.b.Item,{label:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",span:3,children:void 0===v?Object(_.jsx)($.a,{status:"warning",text:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0432 Mindbox"}):v?Object(_.jsx)($.a,{status:"success",text:"\u0412 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0435"}):Object(_.jsx)($.a,{status:"error",text:"\u041d\u0435 \u0432 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0435"})}),Object(_.jsx)(Z.b.Item,{label:"\u041f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 \u0432 \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433",span:3,children:u?Object(_.jsx)($.a,{status:"success",text:"\u041f\u043e\u043f\u0430\u0434\u0430\u0435\u0442"}):Object(_.jsx)($.a,{status:"error",text:"\u041d\u0435 \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442"})})]})]})})},K=n(283),Q={parsed:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",raw:"\u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043a\u043e\u0434"},X=function(e){var t=e.changeMode,n=e.currentMode;return Object(_.jsx)(K.a.Group,{options:Object.values(Q),onChange:function(e){return t(e.target.value)},value:n,optionType:"button",buttonStyle:"solid"})},Y=n(165),ee=n.n(Y),te=(n(271),n(272),function(e){var t=e.rawData,n=t.length>0?JSON.stringify(t,null,2):"";return Object(_.jsx)(ee.a,{mode:"json",theme:"github",value:n,name:"PREVIEW_RAW_PERSONALIZATION_DATA",editorProps:{$blockScrolling:!0}})}),ne=function(e){var t=e.showResult,n=Object(D.a)(E),a=Object(c.useState)(Q.parsed),r=Object(s.a)(a,2),i=r[0],o=r[1];return Object(_.jsxs)(U.b,{direction:"vertical",children:[Object(_.jsx)(X,{changeMode:o,currentMode:i}),i===Q.parsed?Object(_.jsx)(U.b,{direction:"vertical",children:n.map((function(e){return Object(_.jsx)(H,{formInfo:e,showInResult:t},e.id)}))}):Object(_.jsx)(te,{rawData:n})]})},ce=Object(p.d)();Object(p.i)({clock:ce,source:M,target:R});var ae=n(287),re=function(){return Object(_.jsx)("div",{children:Object(_.jsx)(O.a,{onClick:function(){return ce()},icon:Object(_.jsx)(ae.a,{}),children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})})},ie=function(){var e=Object(D.a)(v);return Object(_.jsx)(l.a,{ghost:!1,onBack:function(){return g(0)},title:e.title,extra:[Object(_.jsx)(re,{})]})},se=function(){var e=Object(D.a)(f),t=Object(c.useState)(""),n=Object(s.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)([]),u=Object(s.a)(i,2),b=u[0];u[1];return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(o.a,{children:[Object(_.jsx)(j.a,{flex:"330px",children:Object(_.jsx)(F,{bannerImageUrl:a})}),Object(_.jsxs)(j.a,{flex:"3",children:[Object(_.jsx)(l.a,{className:"site-page-header",title:"\u041f\u0440\u0438\u043c\u0435\u0440 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f"}),Object(_.jsxs)(o.a,{gutter:{xs:8,sm:16,md:24},children:[Object(_.jsx)(j.a,{flex:"330px",children:Object(_.jsx)(J,{})}),Object(_.jsxs)(j.a,{flex:"3",children:[Object(_.jsx)(ie,{}),0===e&&Object(_.jsx)(z,{}),(1===e||2===e)&&b&&Object(_.jsx)(ne,{showResult:r})]})]})]})]})})};var oe=function(){return Object(c.useEffect)((function(){!function(){window.mindbox=window.mindbox||function(){window.mindbox.queue.push(arguments)},window.mindbox.queue=window.mindbox.queue||[],window.mindbox("create",{endpointId:"wpush-test"});var e=document.createElement("script");e.src="https://api.mindbox.ru/scripts/v1/tracker.js",document.getElementsByTagName("head")[0].appendChild(e)}()}),[]),Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(se,{})})};i.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(oe,{})}),document.getElementById("root"))}},[[273,1,2]]]);
//# sourceMappingURL=main.74b2723a.chunk.js.map