(this["webpackJsonppersonalization-example"]=this["webpackJsonppersonalization-example"]||[]).push([[0],{173:function(e,t,n){},175:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(33),i=n.n(a),s=(n(173),n(174),n(175),n(80)),o=n(50),j=n(276),l=n(279),u=n(278),d=n(281),b=n(79),x=n(6),O=n(2),p=n(18),m=[{title:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u044b",description:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u0444\u043e\u0440\u043c, \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0432 GET \u0437\u0430\u043f\u0440\u043e\u0441"},{title:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433",description:"\u0415\u0441\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433 \u043f\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0443, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0438\u043d\u0430\u0434\u043b\u0435\u0436\u0438\u0442 \u043b\u0438 \u043a\u043b\u0438\u0435\u043d\u0442 \u043a \u043d\u0443\u0436\u043d\u043e\u043c\u0443"},{title:"\u041e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u044b",description:"\u0415\u0441\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0434 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u043d\u0430\u0434\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c \u0435\u043c\u0443 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u043d\u0442"}],h=Object(p.f)(0),f=h.map((function(e){return m[e]})),v=Object(p.d)();h.on(v,(function(e,t){return t}));var g=n(37),w=n.n(g),k=n(49),y=n(156),S=n.n(y),I=function(){var e=Object(k.a)(w.a.mark((function e(t){var n,c,r,a,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.domain,r="https://web.popmechanic.ru/web/init/".concat(n,"/?domain=").concat(c),e.next=4,S.a.get(r);case 4:if(a=e.sent,!(i=a.data.forms)){e.next=8;break}return e.abrupt("return",i);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(p.f)([]),E=Object(p.c)(I);N.on(E.doneData,(function(e,t){return v(1),t}));var C=Object(p.d)(),T=Object(p.d)(),_=Object(p.f)({domain:"",id:""});_.on(T,(function(e,t){var n=t.field,c=t.value;return Object(O.a)(Object(O.a)({},e),{},Object(x.a)({},n,c))})),Object(p.i)({clock:C,source:_,target:E});var M=T.prepend((function(e){return{field:e.target.name,value:e.target.value}})),A=n(46),D=n(7),z=function(){var e=Object(A.a)(_),t=l.a.Text,n=l.a.Title;return Object(D.jsxs)("div",{children:[Object(D.jsxs)(u.a,{layout:"vertical",onFinish:C,children:[Object(D.jsx)(u.a.Item,{label:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0432 \u043f\u043e\u043f\u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0430\u0445",children:Object(D.jsx)(d.a,{placeholder:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440",value:e.id,name:"id",onChange:M})}),Object(D.jsx)(u.a.Item,{label:"\u0414\u043e\u043c\u0435\u043d \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0444\u043e\u0440\u043c\u044b",children:Object(D.jsx)(d.a,{placeholder:"\u0414\u043e\u043c\u0435\u043d",name:"domain",value:e.domain,onChange:M})}),Object(D.jsx)(u.a.Item,{children:Object(D.jsx)(b.a,{type:"primary",htmlType:"submit",children:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0444\u043e\u0440\u043c"})})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)(n,{level:4,children:"URL \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0438\u043d\u0444\u043e\u043c\u0440\u0430\u0446\u0438\u0438 \u043e \u0444\u043e\u0440\u043c\u0430\u0445"}),Object(D.jsx)(t,{code:!0,style:{whiteSpace:"nowrap"},children:"https://web.popmechanic.ru/web/init/".concat(e.id,"/?domain=").concat(e.domain)})]})]})},B=n(282),P=(n(263),function(e){var t=e.url;return Object(D.jsx)("div",{children:Object(D.jsx)("img",{src:t,alt:"",style:{maxWidth:"100%"}})})}),R=function(){var e=Object(A.a)(F);return Object(D.jsx)("div",{children:Object(D.jsx)("div",{className:"device-wrapper",children:Object(D.jsxs)("div",{className:"device","data-device":"iPhone7","data-orientation":"portrait","data-color":"black",children:[Object(D.jsxs)("div",{className:"screen",style:{backgroundColor:"white",padding:"15px 10px"},children:[Object(D.jsx)(B.a,{}),e&&Object(D.jsx)(P,{url:e})]}),Object(D.jsx)("div",{className:"button"})]})})})},F=Object(p.f)(""),q=Object(p.d)();F.on(q,(function(e,t){return t}));var J=n(280),W=function(){var e=J.a.Step,t=Object(A.a)(h);return Object(D.jsx)(J.a,{direction:"vertical",current:t,children:m.map((function(t){return Object(D.jsx)(e,{title:t.title,description:t.description},t.title)}))})},G=n(5),L=n(286),V=function(e,t){var n=e.value,c=n.inSegment,r=n.inSegmentByDefault;return!(void 0!==t||!r)||(!(!c||!t)||!c&&!t)},U=function(e,t){return new Promise((function(n,c){window.mindbox("sync",{operation:t,data:{segmentations:[{ids:{externalId:e}}]},onSuccess:function(e){n(Z(e))},onValidationError:function(e){c(e)},onError:function(e){c(e)}})}))},Z=function(e){if(e.customerSegmentations)return!!e.customerSegmentations[0].segment},$=n(277),H=n(285),K=n(284),Q=function(e){var t=e.formInfo,n=function(e){var t,n,c,r=null===(t=e.new_targeting)||void 0===t||null===(n=t.filter)||void 0===n?void 0:n.nodes;return e&&e.settings_splits&&e.settings_splits[0]&&(c=e.settings_splits[0].settings),{targeting:r,views:c}}(t),r=n.targeting,a=n.views,i=Object(c.useState)(0===(null===r||void 0===r?void 0:r.length)),s=Object(G.a)(i,2),o=s[0],j=s[1],l=Object(c.useState)(!1),u=Object(G.a)(l,2),d=u[0],x=u[1],O=Object(c.useState)(null),p=Object(G.a)(O,2),m=p[0],h=p[1],f=function(){var e=Object(k.a)(w.a.mark((function e(){var t,n,c,a,i,s,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}return t=Object(G.a)(r,1),n=t[0],c=n.value,a=c.segmentation,i=c.operation,x(!0),e.next=6,U(a,i);case 6:s=e.sent,h(s),o=V(n,s),j(o),x(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){return r&&r.length>0&&"mindbox_segment"===r[0].field};return Object(D.jsx)($.a,{title:t.name,actions:[v()&&Object(D.jsx)(b.a,{type:"link",loading:d,size:"small",onClick:f,children:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u0435\u0433\u043c\u0435\u043d\u0442"},"checkSegment"),a&&Object(D.jsx)(b.a,{type:"link",size:"small",disabled:!o,onClick:function(){return q(a.image)},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"},"showINResult")],children:Object(D.jsxs)(H.b,{bordered:!0,size:"small",children:[v()?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(H.b.Item,{label:"\u0422\u0438\u043f \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433\u0430",span:3,children:"\u0421\u0435\u0433\u043c\u0435\u043d\u0442 Mindbox"}),Object(D.jsx)(H.b.Item,{label:"\u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0432 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0435",span:3,children:r&&r[0].value.inSegment?"\u0414\u0430":"\u041d\u0435\u0442"}),Object(D.jsx)(H.b.Item,{label:"\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c, \u0435\u0441\u043b\u0438 \u043d\u0435 \u043d\u0430\u0448\u043b\u0438 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",span:3,children:r&&r[0].value.inSegmentByDefault?"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c":"\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c"})]}):Object(D.jsx)(H.b.Item,{label:"\u0422\u0438\u043f \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433\u0430",span:3,children:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432\u0441\u0435\u043c"}),null!==m&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(H.b.Item,{label:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0430",span:3,children:void 0===m?Object(D.jsx)(K.a,{status:"warning",text:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0432 Mindbox"}):m?Object(D.jsx)(K.a,{status:"success",text:"\u0412 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0435"}):Object(D.jsx)(K.a,{status:"error",text:"\u041d\u0435 \u0432 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0435"})}),Object(D.jsx)(H.b.Item,{label:"\u041f\u043e\u043f\u0430\u0434\u0430\u0435\u0442 \u0432 \u0442\u0430\u0440\u0433\u0435\u0442\u0438\u043d\u0433",span:3,children:o?Object(D.jsx)(K.a,{status:"success",text:"\u041f\u043e\u043f\u0430\u0434\u0430\u0435\u0442"}):Object(D.jsx)(K.a,{status:"error",text:"\u041d\u0435 \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u0442"})})]})]})})},X=n(283),Y={parsed:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438",raw:"\u0418\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043a\u043e\u0434"},ee=function(e){var t=e.changeMode,n=e.currentMode;return Object(D.jsx)(X.a.Group,{options:Object.values(Y),onChange:function(e){return t(e.target.value)},value:n,optionType:"button",buttonStyle:"solid"})},te=n(165),ne=n.n(te),ce=(n(271),n(272),function(e){var t=e.rawData,n=t.length>0?JSON.stringify(t,null,2):"";return Object(D.jsx)(ne.a,{mode:"json",theme:"github",value:n,name:"PREVIEW_RAW_PERSONALIZATION_DATA",editorProps:{$blockScrolling:!0}})}),re=function(){var e=Object(A.a)(N),t=Object(c.useState)(Y.parsed),n=Object(G.a)(t,2),r=n[0],a=n[1];return Object(D.jsxs)(L.b,{direction:"vertical",children:[Object(D.jsx)(ee,{changeMode:a,currentMode:r}),r===Y.parsed?Object(D.jsx)(L.b,{direction:"vertical",children:e.map((function(e){return Object(D.jsx)(Q,{formInfo:e},e.id)}))}):Object(D.jsx)(ce,{rawData:e})]})},ae=Object(p.d)();Object(p.i)({clock:ae,source:_,target:E});var ie=n(287),se=function(){return Object(D.jsx)("div",{children:Object(D.jsx)(b.a,{onClick:function(){return ae()},icon:Object(D.jsx)(ie.a,{}),children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"})})},oe=function(){var e=Object(A.a)(f);return Object(D.jsx)(j.a,{ghost:!1,onBack:function(){return v(0)},title:e.title,extra:[Object(D.jsx)(se,{})]})},je=function(){var e=Object(A.a)(h);return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(s.a,{children:[Object(D.jsx)(o.a,{flex:"330px",children:Object(D.jsx)(R,{})}),Object(D.jsxs)(o.a,{flex:"3",children:[Object(D.jsx)(j.a,{className:"site-page-header",title:"\u041f\u0440\u0438\u043c\u0435\u0440 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f"}),Object(D.jsxs)(s.a,{gutter:{xs:8,sm:16,md:24},children:[Object(D.jsx)(o.a,{flex:"330px",children:Object(D.jsx)(W,{})}),Object(D.jsxs)(o.a,{flex:"3",children:[Object(D.jsx)(oe,{}),0===e&&Object(D.jsx)(z,{}),(1===e||2===e)&&Object(D.jsx)(re,{})]})]})]})]})})};var le=function(){return Object(c.useEffect)((function(){!function(){window.mindbox=window.mindbox||function(){window.mindbox.queue.push(arguments)},window.mindbox.queue=window.mindbox.queue||[],window.mindbox("create",{endpointId:"wpush-test"});var e=document.createElement("script");e.src="https://api.mindbox.ru/scripts/v1/tracker.js",document.getElementsByTagName("head")[0].appendChild(e)}()}),[]),Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(je,{})})};i.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(le,{})}),document.getElementById("root"))}},[[273,1,2]]]);
//# sourceMappingURL=main.a4034769.chunk.js.map